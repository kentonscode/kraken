var express=require("express"),urlScan=express.Router(),fs=require("fs");urlScan.get("/:url",function(r,e,s){var o=require("child_process").spawn,a=o("ruby",["wpscan.rb","--batch","--no-color","--url",r.params.url],{cwd:"/Users/Kentonkotsiris/wpscan/"}),n=Math.floor(9e4*Math.random())+1e4,t=(new Date).toDateString();a.stdout.on("data",function(e){var s=process.cwd();-1==s.search("reports")&&process.chdir("./reports"),fs.appendFile(t+": "+n+": "+r.params.url,e,function(r){if(r)throw r;console.log("new report scan file created!")})}),e.send()}),module.exports=urlScan;